import * as React from 'react';
import {storiesOf} from '@storybook/react';
import {chartAsReactComponent} from '../index';
import moment from 'moment';

import lineChart, { dataWaterline } from './index';
import { xAxisDailyTick, yAxisMinMax, exampleAxis } from './axes';
import { overlayTwoPopups, overlayExample } from './overlays';

const ONE_MINUTE_IN_MS = 60 * 1000,
      ONE_HOUR_IN_MS = ONE_MINUTE_IN_MS * 60,
      ONE_DAY_IN_MS = ONE_HOUR_IN_MS * 60;

const LineChart = chartAsReactComponent(lineChart);

// Since this data is so large, it's been serialized below in the format:
// "count,timestamp;count,timestamp;..."
// This function converts that format into:
// [{count: 1, timestamp: "timestamp"}, ...]
function uncompressData(data) {
  return data.split(';').map(i => {
    const [value, timestamp] = i.split(',');
    return {value: parseInt(value), timestamp};
  });
}

storiesOf('Line Chart', module)
  .add('Small amount of artificial data', () => (
    <LineChart
      timeZone="UTC"
      svgWidth={1000}
      svgHeight={300}

      xAxis={xAxisDailyTick({
        timeBetweenTicksInMs: 1 * ONE_MINUTE_IN_MS,
        bottomOffset: 15,
      })}
      // xAxis={exampleAxis({color: 'red'})}

      yAxis={yAxisMinMax({
        leftOffset: 20,
        axisRuleLineDashWidth: 4,
        axisRuleLineDashSpacing: 10,
        points: [
          {value: 20, hasRule: true},
          {value: 10, hasRule: false},
        ],
      })}
      yAxisEnd={40}
      yAxisStart={0}

      overlayShowPoint={true}
      overlayPointRadius={4.5}

      overlays={[
        overlayTwoPopups({
          topPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({item, xScale, mouseX, topOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${topOverlayWidth / 2},26)`)
                .text(`${item.value}`);
            },
            exit: selection => selection.remove(),
          },
          bottomPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({xScale, mouseX, bottomOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${bottomOverlayWidth / 2},26)`)
                .text(`${moment.utc(xScale.invert(mouseX)).format()}`);
            },
            exit: selection => selection.remove(),
          },

          bottomOverlayTopMargin: 40,
          topOverlayBottomMargin: 10,
        }),
        // overlayExample({color: 'red'}),
      ]}

      data={[
        {
          name: 'default',
          type: dataWaterline,
          color: 'rgba(65, 152, 255, 0.2)',
          borderColor: 'rgb(65, 152, 255)',
          data: [
            {value: 40, timestamp: '2018-04-16T14:00:00.000Z'},
            {value: 7, timestamp: '2018-04-16T20:00:00.000Z'},
            {value: 8, timestamp: '2018-04-16T21:00:00.000Z'},
            {value: 10, timestamp: '2018-04-16T23:00:00.000Z'},
          ],
        },
        // {
        //   name: 'secondary',
        //   type: dataWaterline,
        //   color: 'rgba(255, 0, 0, 0.2)',
        //   borderColor: 'red',
        //   data: [
        //     {value: 18, timestamp: '2018-04-16T14:00:00.000Z'},
        //     {value: 7, timestamp: '2018-04-16T20:00:00.000Z'},
        //     {value: 20, timestamp: '2018-04-16T21:00:00.000Z'},
        //     {value: 20, timestamp: '2018-04-16T23:00:00.000Z'},
        //   ],
        // },
      ]}
    />
  ))
  .add('With a day of data', () => (
    <LineChart
      timeZone="UTC"
      svgWidth={1000}
      svgHeight={300}

      xAxis={xAxisDailyTick({
        timeBetweenTicksInMs: 1 * ONE_MINUTE_IN_MS,
        bottomOffset: 15,
      })}

      yAxis={yAxisMinMax({
        leftOffset: 20,
        axisRuleLineDashWidth: 4,
        axisRuleLineDashSpacing: 10,
        points: [],
      })}
      yAxisEnd={100}
      yAxisStart={0}

      overlayShowPoint={true}
      overlayPointRadius={4.5}

      overlays={[
        overlayTwoPopups({
          topPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({item, xScale, mouseX, topOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${topOverlayWidth / 2},26)`)
                .text(`${item.value}`);
            },
            exit: selection => selection.remove(),
          },
          bottomPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({xScale, mouseX, bottomOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${bottomOverlayWidth / 2},26)`)
                .text(`${moment.utc(xScale.invert(mouseX)).format()}`);
            },
            exit: selection => selection.remove(),
          },

          bottomOverlayTopMargin: 40,
          topOverlayBottomMargin: 10,
        }),
      ]}

      data={[
        {
          name: 'default',
          type: dataWaterline,
          color: 'rgba(65, 152, 255, 0.2)',
          borderColor: 'rgb(65, 152, 255)',
          data: uncompressData(fullDayOfData),
        },
      ]}
    />
  ))
  .add('With a partial day of data shown on a full-day chart', () => (
    <LineChart
      timeZone="UTC"
      svgWidth={1000}
      svgHeight={300}

      xAxis={xAxisDailyTick({
        timeBetweenTicksInMs: 1 * ONE_MINUTE_IN_MS,
        bottomOffset: 15,
      })}
      xAxisStart="2017-03-29T12:03:05.679Z"
      xAxisEnd="2017-03-30T12:03:05.679Z"

      yAxis={yAxisMinMax({
        leftOffset: 20,
        axisRuleLineDashWidth: 4,
        axisRuleLineDashSpacing: 10,
        points: [],
      })}
      yAxisEnd={100}
      yAxisStart={0}

      overlayShowPoint={true}
      overlayPointRadius={4.5}

      overlays={[
        overlayTwoPopups({
          topPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({item, xScale, mouseX, topOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${topOverlayWidth / 2},26)`)
                .text(`${item.value}`);
            },
            exit: selection => selection.remove(),
          },
          bottomPopupFormatter: {
            enter: selection => {
              selection.append('text')
                .attr('text-anchor', 'middle')
                .attr('font-weight', '500')
            },
            merge: ({xScale, mouseX, bottomOverlayWidth}, selection) => {
              selection.select('text')
                .attr('transform', `translate(${bottomOverlayWidth / 2},26)`)
                .text(`${moment.utc(xScale.invert(mouseX)).format()}`);
            },
            exit: selection => selection.remove(),
          },

          bottomOverlayTopMargin: 40,
          topOverlayBottomMargin: 10,
        }),
      ]}

      data={[
        {
          name: 'default',
          type: dataWaterline,
          color: 'rgba(65, 152, 255, 0.2)',
          borderColor: 'rgb(65, 152, 255)',
          data: uncompressData(partialDayOfData),
        },
      ]}
    />
  ))
  .add(`With adding points to the graph over time. This is to show that the graph can receive updates.`, () => {
    class AddNewPointsToGraph extends React.Component {
      constructor(props) {
        super(props);
        this.state = {data: [
          {value: 1, timestamp: moment().subtract(2, 'second').toISOString()},
          {value: 3, timestamp: moment().subtract(1, 'second').toISOString()},
        ]}
      }
      componentDidMount() {
        let currentCount = 0;
        this.interval = setInterval(() => {
          currentCount += Math.random() > 0.5 ? 1 : -1;
          this.setState({data: [
            ...this.state.data,
            { value: currentCount, timestamp: moment().toISOString() }
          ]});
        }, 1000);
      }
      componentWillUnmount() {
        clearInterval(this.interval);
      }
      render() {
        return <LineChart
          timeZone="UTC"
          svgWidth={1000}
          svgHeight={300}

          xAxis={xAxisDailyTick({
            timeBetweenTicksInMs: 1 * ONE_MINUTE_IN_MS,
            bottomOffset: 15,
          })}

          yAxis={yAxisMinMax({
            leftOffset: 20,
            axisRuleLineDashWidth: 4,
            axisRuleLineDashSpacing: 10,
            points: [],
          })}

          overlayShowPoint={true}
          overlayPointRadius={4.5}

          overlays={[
            overlayTwoPopups({
              topPopupFormatter: {
                enter: selection => {
                  selection.append('text')
                    .attr('text-anchor', 'middle')
                    .attr('font-weight', '500')
                },
                merge: ({item, xScale, mouseX, topOverlayWidth}, selection) => {
                  selection.select('text')
                    .attr('transform', `translate(${topOverlayWidth / 2},26)`)
                    .text(`${item.value}`);
                },
                exit: selection => selection.remove(),
              },
              bottomPopupFormatter: {
                enter: selection => {
                  selection.append('text')
                    .attr('text-anchor', 'middle')
                    .attr('font-weight', '500')
                },
                merge: ({xScale, mouseX, bottomOverlayWidth}, selection) => {
                  selection.select('text')
                    .attr('transform', `translate(${bottomOverlayWidth / 2},26)`)
                    .text(`${moment.utc(xScale.invert(mouseX)).format()}`);
                },
                exit: selection => selection.remove(),
              },

              bottomOverlayTopMargin: 40,
              topOverlayBottomMargin: 10,
            }),
          ]}

          data={[
            {
              name: 'default',
              type: dataWaterline,
              color: 'rgba(65, 152, 255, 0.2)',
              borderColor: 'rgb(65, 152, 255)',
              data: this.state.data,
            },
          ]}
        />;
      }
    }
    return <AddNewPointsToGraph />;
  })







const fullDayOfData = "1,2017-03-28T12:02:11.330Z;0,2017-03-28T12:02:14.864Z;1,2017-03-28T12:02:21.997Z;2,2017-03-28T12:02:22.897Z;3,2017-03-28T12:02:35.030Z;4,2017-03-28T12:08:10.959Z;5,2017-03-28T12:10:34.591Z;6,2017-03-28T12:10:41.158Z;5,2017-03-28T12:12:31.856Z;6,2017-03-28T12:12:43.855Z;7,2017-03-28T12:14:53.954Z;8,2017-03-28T12:17:11.019Z;9,2017-03-28T12:18:04.085Z;8,2017-03-28T12:20:13.117Z;9,2017-03-28T12:20:54.350Z;10,2017-03-28T12:21:18.017Z;9,2017-03-28T12:21:20.183Z;10,2017-03-28T12:21:30.616Z;9,2017-03-28T12:27:09.645Z;8,2017-03-28T12:28:55.077Z;9,2017-03-28T12:28:55.844Z;10,2017-03-28T12:31:59.475Z;9,2017-03-28T12:32:04.142Z;10,2017-03-28T12:33:18.041Z;11,2017-03-28T12:33:22.274Z;10,2017-03-28T12:35:46.905Z;11,2017-03-28T12:37:09.938Z;12,2017-03-28T12:39:24.569Z;13,2017-03-28T12:47:25.697Z;14,2017-03-28T12:53:49.592Z;13,2017-03-28T12:55:17.825Z;14,2017-03-28T12:57:45.524Z;13,2017-03-28T12:58:07.456Z;14,2017-03-28T13:06:58.150Z;13,2017-03-28T13:09:23.948Z;14,2017-03-28T13:10:53.648Z;15,2017-03-28T13:12:19.846Z;14,2017-03-28T13:12:55.945Z;13,2017-03-28T13:14:00.744Z;12,2017-03-28T13:18:14.408Z;13,2017-03-28T13:22:38.271Z;14,2017-03-28T13:22:39.238Z;15,2017-03-28T13:24:37.337Z;14,2017-03-28T13:25:33.969Z;13,2017-03-28T13:25:38.903Z;14,2017-03-28T13:28:57.367Z;15,2017-03-28T13:30:27.333Z;16,2017-03-28T13:32:33.831Z;15,2017-03-28T13:34:40.630Z;16,2017-03-28T13:36:51.961Z;17,2017-03-28T13:36:54.530Z;16,2017-03-28T13:37:07.794Z;15,2017-03-28T13:38:06.760Z;16,2017-03-28T13:43:32.623Z;17,2017-03-28T13:50:16.918Z;18,2017-03-28T13:50:33.318Z;17,2017-03-28T13:51:25.551Z;16,2017-03-28T13:51:49.950Z;17,2017-03-28T13:53:15.549Z;18,2017-03-28T13:54:36.282Z;17,2017-03-28T13:55:12.315Z;18,2017-03-28T13:56:41.414Z;17,2017-03-28T13:57:31.379Z;18,2017-03-28T13:57:34.247Z;17,2017-03-28T13:59:05.212Z;16,2017-03-28T14:03:43.742Z;17,2017-03-28T14:04:15.341Z;18,2017-03-28T14:04:43.474Z;19,2017-03-28T14:05:06.107Z;18,2017-03-28T14:05:08.241Z;19,2017-03-28T14:05:31.340Z;18,2017-03-28T14:10:33.670Z;19,2017-03-28T14:10:52.403Z;18,2017-03-28T14:11:05.204Z;19,2017-03-28T14:11:26.969Z;20,2017-03-28T14:11:34.569Z;21,2017-03-28T14:11:36.271Z;22,2017-03-28T14:12:49.068Z;21,2017-03-28T14:13:33.401Z;20,2017-03-28T14:15:55.533Z;21,2017-03-28T14:17:31.731Z;22,2017-03-28T14:21:25.762Z;23,2017-03-28T14:23:24.527Z;22,2017-03-28T14:25:40.959Z;23,2017-03-28T14:26:39.125Z;24,2017-03-28T14:27:14.224Z;25,2017-03-28T14:29:06.757Z;24,2017-03-28T14:30:25.122Z;23,2017-03-28T14:30:44.122Z;24,2017-03-28T14:31:17.321Z;25,2017-03-28T14:32:53.120Z;26,2017-03-28T14:36:47.684Z;27,2017-03-28T14:36:49.152Z;28,2017-03-28T14:37:27.950Z;29,2017-03-28T14:38:30.716Z;30,2017-03-28T14:39:33.415Z;29,2017-03-28T14:41:50.880Z;30,2017-03-28T14:42:59.846Z;31,2017-03-28T14:44:32.378Z;32,2017-03-28T14:46:48.243Z;33,2017-03-28T14:49:17.141Z;34,2017-03-28T14:49:18.275Z;35,2017-03-28T14:49:42.607Z;34,2017-03-28T14:50:39.840Z;35,2017-03-28T14:50:52.306Z;36,2017-03-28T14:52:17.940Z;35,2017-03-28T14:52:58.838Z;34,2017-03-28T14:53:50.004Z;35,2017-03-28T14:54:05.871Z;36,2017-03-28T14:55:04.837Z;35,2017-03-28T14:55:23.736Z;34,2017-03-28T14:55:24.536Z;35,2017-03-28T14:56:40.402Z;34,2017-03-28T14:58:11.101Z;33,2017-03-28T15:00:20.366Z;32,2017-03-28T15:00:54.765Z;33,2017-03-28T15:01:10.732Z;32,2017-03-28T15:01:43.898Z;31,2017-03-28T15:03:20.630Z;32,2017-03-28T15:05:42.028Z;31,2017-03-28T15:08:51.659Z;30,2017-03-28T15:11:22.691Z;31,2017-03-28T15:11:52.123Z;32,2017-03-28T15:12:32.890Z;33,2017-03-28T15:14:12.522Z;32,2017-03-28T15:18:13.285Z;31,2017-03-28T15:19:47.651Z;32,2017-03-28T15:24:01.514Z;31,2017-03-28T15:25:39.380Z;30,2017-03-28T15:25:40.247Z;31,2017-03-28T15:26:49.279Z;30,2017-03-28T15:27:14.547Z;31,2017-03-28T15:27:25.345Z;32,2017-03-28T15:27:26.846Z;33,2017-03-28T15:29:48.376Z;34,2017-03-28T15:37:16.670Z;33,2017-03-28T15:38:55.870Z;32,2017-03-28T15:39:09.236Z;33,2017-03-28T15:40:43.968Z;34,2017-03-28T15:40:49.102Z;35,2017-03-28T15:40:50.304Z;34,2017-03-28T15:42:00.501Z;33,2017-03-28T15:42:01.068Z;32,2017-03-28T15:44:51.166Z;31,2017-03-28T15:44:51.566Z;30,2017-03-28T15:46:42.697Z;31,2017-03-28T15:46:50.066Z;32,2017-03-28T15:47:11.465Z;31,2017-03-28T15:47:20.197Z;32,2017-03-28T15:52:33.693Z;31,2017-03-28T15:53:23.726Z;32,2017-03-28T15:58:11.823Z;33,2017-03-28T15:58:28.489Z;32,2017-03-28T15:58:30.323Z;31,2017-03-28T16:00:56.054Z;32,2017-03-28T16:01:12.054Z;31,2017-03-28T16:01:14.621Z;32,2017-03-28T16:01:20.387Z;31,2017-03-28T16:01:28.487Z;30,2017-03-28T16:01:41.886Z;29,2017-03-28T16:04:00.318Z;28,2017-03-28T16:04:08.052Z;29,2017-03-28T16:04:11.286Z;28,2017-03-28T16:04:11.786Z;29,2017-03-28T16:07:30.349Z;28,2017-03-28T16:09:14.814Z;27,2017-03-28T16:10:00.847Z;28,2017-03-28T16:11:49.779Z;29,2017-03-28T16:12:27.812Z;30,2017-03-28T16:17:15.008Z;29,2017-03-28T16:17:20.509Z;28,2017-03-28T16:17:28.642Z;29,2017-03-28T16:17:38.041Z;28,2017-03-28T16:17:53.710Z;29,2017-03-28T16:26:32.935Z;28,2017-03-28T16:27:26.001Z;27,2017-03-28T16:28:19.534Z;28,2017-03-28T16:29:11.100Z;27,2017-03-28T16:29:59.137Z;28,2017-03-28T16:31:34.731Z;27,2017-03-28T16:32:46.197Z;26,2017-03-28T16:34:02.029Z;27,2017-03-28T16:35:05.528Z;28,2017-03-28T16:35:06.363Z;27,2017-03-28T16:37:05.592Z;28,2017-03-28T16:48:36.141Z;27,2017-03-28T16:49:16.606Z;28,2017-03-28T16:52:14.798Z;27,2017-03-28T16:52:25.896Z;28,2017-03-28T16:56:05.523Z;29,2017-03-28T16:57:15.889Z;28,2017-03-28T16:58:35.754Z;29,2017-03-28T16:59:02.154Z;28,2017-03-28T17:00:14.152Z;29,2017-03-28T17:00:24.086Z;30,2017-03-28T17:00:51.419Z;31,2017-03-28T17:01:34.084Z;32,2017-03-28T17:01:51.818Z;33,2017-03-28T17:05:12.881Z;34,2017-03-28T17:06:29.913Z;33,2017-03-28T17:09:15.543Z;32,2017-03-28T17:10:14.842Z;33,2017-03-28T17:12:51.506Z;34,2017-03-28T17:13:08.906Z;35,2017-03-28T17:16:31.836Z;36,2017-03-28T17:16:33.104Z;37,2017-03-28T17:19:57.033Z;38,2017-03-28T17:29:29.794Z;37,2017-03-28T17:32:56.324Z;36,2017-03-28T17:33:56.123Z;37,2017-03-28T17:34:05.523Z;38,2017-03-28T17:34:19.790Z;37,2017-03-28T17:34:48.589Z;36,2017-03-28T17:34:50.590Z;37,2017-03-28T17:43:22.382Z;36,2017-03-28T17:44:01.181Z;37,2017-03-28T17:45:20.647Z;36,2017-03-28T17:45:36.947Z;37,2017-03-28T17:46:37.379Z;38,2017-03-28T17:46:59.679Z;37,2017-03-28T17:48:44.612Z;36,2017-03-28T17:49:16.645Z;35,2017-03-28T17:49:19.045Z;34,2017-03-28T17:49:27.778Z;35,2017-03-28T17:50:29.911Z;36,2017-03-28T17:50:57.677Z;35,2017-03-28T17:52:27.443Z;36,2017-03-28T17:52:37.309Z;35,2017-03-28T17:53:47.975Z;36,2017-03-28T17:55:01.575Z;35,2017-03-28T17:55:47.276Z;36,2017-03-28T17:55:54.276Z;35,2017-03-28T17:56:49.844Z;34,2017-03-28T17:58:11.379Z;35,2017-03-28T17:58:11.612Z;36,2017-03-28T17:58:48.012Z;35,2017-03-28T17:59:20.846Z;36,2017-03-28T18:00:20.547Z;35,2017-03-28T18:00:29.080Z;36,2017-03-28T18:00:38.814Z;35,2017-03-28T18:01:55.781Z;34,2017-03-28T18:03:48.616Z;33,2017-03-28T18:04:33.348Z;34,2017-03-28T18:05:04.981Z;35,2017-03-28T18:05:55.315Z;36,2017-03-28T18:05:59.015Z;37,2017-03-28T18:06:09.948Z;36,2017-03-28T18:06:27.915Z;37,2017-03-28T18:08:49.248Z;36,2017-03-28T18:09:16.181Z;35,2017-03-28T18:10:20.747Z;34,2017-03-28T18:11:19.713Z;35,2017-03-28T18:11:46.147Z;36,2017-03-28T18:15:55.478Z;37,2017-03-28T18:18:10.277Z;36,2017-03-28T18:18:35.343Z;37,2017-03-28T18:21:08.409Z;38,2017-03-28T18:22:52.508Z;37,2017-03-28T18:24:20.407Z;38,2017-03-28T18:24:58.373Z;39,2017-03-28T18:25:00.674Z;38,2017-03-28T18:25:20.775Z;39,2017-03-28T18:25:31.774Z;40,2017-03-28T18:25:38.207Z;41,2017-03-28T18:25:54.873Z;42,2017-03-28T18:26:09.306Z;41,2017-03-28T18:28:47.771Z;40,2017-03-28T18:29:48.304Z;41,2017-03-28T18:31:45.568Z;42,2017-03-28T18:34:33.765Z;41,2017-03-28T18:38:16.595Z;42,2017-03-28T18:39:53.394Z;41,2017-03-28T18:41:25.526Z;42,2017-03-28T18:41:45.026Z;41,2017-03-28T18:41:46.460Z;42,2017-03-28T18:44:09.323Z;41,2017-03-28T18:44:55.956Z;42,2017-03-28T18:46:10.322Z;43,2017-03-28T19:01:11.311Z;44,2017-03-28T19:01:26.744Z;45,2017-03-28T19:01:54.244Z;46,2017-03-28T19:02:02.778Z;45,2017-03-28T19:02:12.710Z;44,2017-03-28T19:02:47.543Z;45,2017-03-28T19:03:52.641Z;46,2017-03-28T19:04:24.406Z;45,2017-03-28T19:06:19.867Z;46,2017-03-28T19:08:22.429Z;45,2017-03-28T19:09:44.925Z;46,2017-03-28T19:10:59.989Z;45,2017-03-28T19:11:15.089Z;44,2017-03-28T19:11:16.257Z;43,2017-03-28T19:11:21.189Z;44,2017-03-28T19:13:08.687Z;45,2017-03-28T19:13:24.688Z;46,2017-03-28T19:14:05.053Z;47,2017-03-28T19:15:16.086Z;46,2017-03-28T19:15:38.952Z;47,2017-03-28T19:15:42.919Z;46,2017-03-28T19:17:33.651Z;47,2017-03-28T19:19:14.283Z;48,2017-03-28T19:19:27.983Z;47,2017-03-28T19:19:42.816Z;48,2017-03-28T19:20:11.549Z;47,2017-03-28T19:21:08.682Z;48,2017-03-28T19:21:36.882Z;47,2017-03-28T19:21:47.015Z;48,2017-03-28T19:22:05.715Z;47,2017-03-28T19:23:52.813Z;46,2017-03-28T19:24:29.580Z;47,2017-03-28T19:25:48.179Z;48,2017-03-28T19:25:54.512Z;47,2017-03-28T19:25:55.680Z;46,2017-03-28T19:26:47.511Z;47,2017-03-28T19:28:31.543Z;48,2017-03-28T19:29:38.109Z;49,2017-03-28T19:31:30.075Z;48,2017-03-28T19:31:30.975Z;49,2017-03-28T19:31:44.841Z;48,2017-03-28T19:32:24.474Z;49,2017-03-28T19:33:41.706Z;48,2017-03-28T19:34:31.772Z;49,2017-03-28T19:35:14.439Z;50,2017-03-28T19:39:04.436Z;51,2017-03-28T19:39:04.503Z;52,2017-03-28T19:39:04.869Z;51,2017-03-28T19:41:01.034Z;52,2017-03-28T19:42:58.465Z;51,2017-03-28T19:43:15.899Z;52,2017-03-28T19:43:23.932Z;51,2017-03-28T19:45:27.897Z;52,2017-03-28T19:46:26.596Z;53,2017-03-28T19:48:12.628Z;54,2017-03-28T19:49:05.561Z;55,2017-03-28T19:50:09.793Z;56,2017-03-28T19:50:19.194Z;55,2017-03-28T19:50:21.527Z;56,2017-03-28T19:50:34.826Z;57,2017-03-28T19:50:48.893Z;58,2017-03-28T19:51:01.559Z;57,2017-03-28T19:51:05.293Z;56,2017-03-28T19:52:42.125Z;55,2017-03-28T19:52:51.992Z;54,2017-03-28T19:53:05.258Z;55,2017-03-28T19:54:48.690Z;54,2017-03-28T19:56:09.189Z;53,2017-03-28T20:00:29.719Z;54,2017-03-28T20:02:51.651Z;53,2017-03-28T20:03:47.417Z;52,2017-03-28T20:03:55.351Z;53,2017-03-28T20:04:30.883Z;52,2017-03-28T20:05:56.882Z;51,2017-03-28T20:06:39.915Z;50,2017-03-28T20:09:20.946Z;51,2017-03-28T20:13:18.639Z;50,2017-03-28T20:15:51.601Z;51,2017-03-28T20:21:00.655Z;50,2017-03-28T20:21:50.320Z;49,2017-03-28T20:28:21.210Z;50,2017-03-28T20:31:36.206Z;49,2017-03-28T20:32:16.271Z;50,2017-03-28T20:33:05.804Z;49,2017-03-28T21:18:19.972Z;48,2017-03-28T21:19:43.071Z;49,2017-03-28T21:20:57.643Z;50,2017-03-28T21:22:05.080Z;49,2017-03-28T21:22:53.550Z;50,2017-03-28T21:25:38.091Z;49,2017-03-28T21:31:36.166Z;48,2017-03-28T22:00:36.217Z;49,2017-03-28T22:01:59.749Z;48,2017-03-28T22:03:59.881Z;47,2017-03-28T22:10:18.544Z;46,2017-03-28T22:15:02.541Z;47,2017-03-28T22:28:48.696Z;48,2017-03-28T22:55:25.742Z;49,2017-03-28T22:58:22.041Z;50,2017-03-28T22:58:40.239Z;49,2017-03-28T23:00:25.104Z;50,2017-03-28T23:40:22.923Z;49,2017-03-28T23:47:46.435Z;48,2017-03-29T00:01:28.471Z;47,2017-03-29T00:01:29.805Z;48,2017-03-29T08:50:08.721Z;49,2017-03-29T09:09:12.640Z;48,2017-03-29T09:09:14.674Z;49,2017-03-29T09:09:22.274Z;48,2017-03-29T09:09:25.374Z;49,2017-03-29T09:09:40.307Z;50,2017-03-29T09:09:40.742Z;49,2017-03-29T09:15:29.768Z;50,2017-03-29T09:16:20.368Z;49,2017-03-29T09:22:54.796Z;50,2017-03-29T11:27:16.572Z;51,2017-03-29T11:31:00.103Z;50,2017-03-29T11:31:53.569Z;49,2017-03-29T11:33:53.067Z;48,2017-03-29T11:33:54.668Z;49,2017-03-29T11:33:59.468Z;48,2017-03-29T11:34:46.467Z;49,2017-03-29T11:35:07.766Z;48,2017-03-29T11:35:52.032Z;49,2017-03-29T11:36:10.399Z;50,2017-03-29T11:37:54.898Z;51,2017-03-29T11:37:56.265Z;52,2017-03-29T11:50:06.822Z;53,2017-03-29T11:54:37.486Z;52,2017-03-29T11:57:51.516Z;53,2017-03-29T11:57:59.383Z;54,2017-03-29T11:58:06.950Z;55,2017-03-29T11:58:17.016Z;54,2017-03-29T11:59:50.315Z";

const partialDayOfData = "1,2017-03-29T12:03:05.679Z;2,2017-03-29T12:04:49.011Z;1,2017-03-29T12:07:48.509Z;0,2017-03-29T12:07:49.610Z;1,2017-03-29T12:11:41.973Z;2,2017-03-29T12:15:20.570Z;1,2017-03-29T12:19:23.601Z;2,2017-03-29T12:20:02.534Z;3,2017-03-29T12:20:03.674Z;4,2017-03-29T12:23:02.165Z;5,2017-03-29T12:23:04.632Z;6,2017-03-29T12:27:42.895Z;7,2017-03-29T12:30:38.692Z;8,2017-03-29T12:32:52.591Z;9,2017-03-29T12:33:00.358Z;10,2017-03-29T12:34:33.356Z;11,2017-03-29T12:35:54.323Z;10,2017-03-29T12:42:10.151Z;9,2017-03-29T12:43:29.417Z;10,2017-03-29T12:45:45.415Z;11,2017-03-29T12:47:00.481Z;10,2017-03-29T12:49:23.646Z;11,2017-03-29T12:51:16.611Z;10,2017-03-29T12:52:32.610Z;11,2017-03-29T12:53:14.910Z;12,2017-03-29T12:53:44.976Z;13,2017-03-29T12:56:00.508Z;14,2017-03-29T12:56:56.607Z;13,2017-03-29T12:59:49.838Z;12,2017-03-29T12:59:51.172Z;11,2017-03-29T12:59:53.639Z;12,2017-03-29T13:02:04.770Z;11,2017-03-29T13:03:19.103Z;12,2017-03-29T13:05:20.268Z;13,2017-03-29T13:11:30.530Z;14,2017-03-29T13:11:47.396Z;15,2017-03-29T13:11:49.063Z;16,2017-03-29T13:12:35.262Z;15,2017-03-29T13:13:22.695Z;14,2017-03-29T13:13:40.761Z;13,2017-03-29T13:13:42.129Z;12,2017-03-29T13:13:45.863Z;11,2017-03-29T13:13:48.562Z;10,2017-03-29T13:14:56.327Z;11,2017-03-29T13:15:06.961Z;10,2017-03-29T13:15:44.060Z;11,2017-03-29T13:18:37.158Z;10,2017-03-29T13:20:43.457Z;11,2017-03-29T13:21:39.656Z;10,2017-03-29T13:21:46.556Z;9,2017-03-29T13:23:25.421Z;10,2017-03-29T13:23:26.856Z;11,2017-03-29T13:25:12.787Z;10,2017-03-29T13:25:24.787Z;11,2017-03-29T13:25:45.086Z;12,2017-03-29T13:25:54.520Z;11,2017-03-29T13:26:04.419Z;12,2017-03-29T13:27:00.219Z;13,2017-03-29T13:27:19.218Z;14,2017-03-29T13:27:45.985Z;13,2017-03-29T13:28:14.551Z;12,2017-03-29T13:28:15.351Z;13,2017-03-29T13:28:47.151Z;14,2017-03-29T13:30:40.783Z;13,2017-03-29T13:30:56.282Z;14,2017-03-29T13:31:43.182Z;15,2017-03-29T13:31:44.182Z;16,2017-03-29T13:31:44.349Z;15,2017-03-29T13:31:54.650Z;14,2017-03-29T13:31:57.017Z;13,2017-03-29T13:33:32.247Z;14,2017-03-29T13:35:13.713Z;15,2017-03-29T13:37:07.045Z;16,2017-03-29T13:37:07.878Z;15,2017-03-29T13:38:34.612Z;14,2017-03-29T13:40:16.942Z;13,2017-03-29T13:40:18.677Z;14,2017-03-29T13:45:10.539Z;15,2017-03-29T13:45:12.573Z;14,2017-03-29T13:46:04.338Z;13,2017-03-29T13:47:24.937Z;12,2017-03-29T13:47:30.872Z;13,2017-03-29T13:47:33.504Z;14,2017-03-29T13:47:58.470Z;15,2017-03-29T13:48:53.070Z;16,2017-03-29T13:49:45.502Z;15,2017-03-29T13:51:11.835Z;16,2017-03-29T13:51:39.934Z;17,2017-03-29T13:52:14.034Z;18,2017-03-29T13:52:16.368Z;19,2017-03-29T13:52:59.533Z;20,2017-03-29T13:53:00.868Z;19,2017-03-29T13:53:21.033Z;18,2017-03-29T13:54:39.732Z;19,2017-03-29T13:56:29.231Z;18,2017-03-29T13:58:24.996Z;19,2017-03-29T14:01:21.327Z;20,2017-03-29T14:02:45.393Z;21,2017-03-29T14:08:58.255Z";
